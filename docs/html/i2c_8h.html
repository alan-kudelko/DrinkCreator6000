<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DrinkCreator6000: avr_peripherals/i2c/i2c.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DrinkCreator6000
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('i2c_8h.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">i2c.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>I2C (TWI) Master driver for AVR (ATmega2560).  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;<a class="el" href="_drink_creator6000___config___c_8h_source.html">DrinkCreator6000_Config_C.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for i2c.h:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8h__incl.png" border="0" usemap="#aavr__peripherals_2i2c_2i2c_8h" loading="lazy" alt=""/></div>
<map name="aavr__peripherals_2i2c_2i2c_8h" id="aavr__peripherals_2i2c_2i2c_8h">
<area shape="rect" title="I2C (TWI) Master driver for AVR (ATmega2560)." alt="" coords="94,5,224,48"/>
<area shape="rect" title=" " alt="" coords="42,96,116,123"/>
<area shape="poly" title=" " alt="" coords="140,50,104,87,100,83,137,47"/>
<area shape="rect" href="_drink_creator6000___config___c_8h.html" title="Centralized configuration header for the DrinkCreator6000 system." alt="" coords="141,96,337,123"/>
<area shape="poly" title=" " alt="" coords="182,47,218,83,214,87,178,50"/>
<area shape="rect" title=" " alt="" coords="5,171,100,197"/>
<area shape="poly" title=" " alt="" coords="208,126,100,167,98,162,206,121"/>
<area shape="rect" title=" " alt="" coords="124,171,181,197"/>
<area shape="poly" title=" " alt="" coords="226,125,181,163,177,159,222,121"/>
<area shape="rect" title=" " alt="" coords="206,171,273,197"/>
<area shape="poly" title=" " alt="" coords="242,123,242,155,236,155,236,123"/>
<area shape="rect" title=" " alt="" coords="298,171,373,197"/>
<area shape="poly" title=" " alt="" coords="257,121,308,159,305,163,254,125"/>
<area shape="rect" href="_drink_creator6000___data_types_8h.html" title="Custom data types for controlling application context in the DrinkCreator6000 project." alt="" coords="397,171,601,197"/>
<area shape="poly" title=" " alt="" coords="285,121,440,163,438,169,284,126"/>
<area shape="rect" title=" " alt="" coords="467,245,531,272"/>
<area shape="poly" title=" " alt="" coords="502,198,502,230,496,230,496,198"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8h__dep__incl.png" border="0" usemap="#aavr__peripherals_2i2c_2i2c_8hdep" loading="lazy" alt=""/></div>
<map name="aavr__peripherals_2i2c_2i2c_8hdep" id="aavr__peripherals_2i2c_2i2c_8hdep">
<area shape="rect" title="I2C (TWI) Master driver for AVR (ATmega2560)." alt="" coords="271,5,401,48"/>
<area shape="rect" href="i2c_8c.html" title=" " alt="" coords="5,96,136,139"/>
<area shape="poly" title=" " alt="" coords="260,56,134,98,132,93,258,51"/>
<area shape="rect" href="_drink_creator6000_8cpp.html" title=" " alt="" coords="160,104,330,131"/>
<area shape="poly" title=" " alt="" coords="306,61,260,105,256,102,302,57"/>
<area shape="rect" href="_drink_creator6000___init_8cpp.html" title=" " alt="" coords="354,96,499,139"/>
<area shape="poly" title=" " alt="" coords="370,57,407,94,404,98,366,61"/>
<area shape="rect" href="task_update_screen_8cpp.html" title=" " alt="" coords="524,104,700,131"/>
<area shape="poly" title=" " alt="" coords="415,51,573,101,571,106,414,56"/>
</map>
</div>
</div>
<p><a href="i2c_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:I2C_5FData_5Ft" id="r_I2C_5FData_5Ft"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_i2_c___data__t.html">I2C_Data_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure representing a single I2C data packet.  <a href="struct_i2_c___data__t.html#details">More...</a><br /></td></tr>
<tr class="memitem:I2C_5FErrorCounters_5Ft" id="r_I2C_5FErrorCounters_5Ft"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_i2_c___error_counters__t.html">I2C_ErrorCounters_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counters for different I2C/TWI error types.  <a href="struct_i2_c___error_counters__t.html#details">More...</a><br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8b7500a141450a9df212017430c0df9e" id="r_a8b7500a141450a9df212017430c0df9e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8b7500a141450a9df212017430c0df9e">I2C_FREQ</a>&#160;&#160;&#160;100000UL</td></tr>
<tr class="memdesc:a8b7500a141450a9df212017430c0df9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2C bus frequency in Hertz.  <br /></td></tr>
<tr class="memitem:a878f90cbeadf645d3c751158e246397f" id="r_a878f90cbeadf645d3c751158e246397f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a878f90cbeadf645d3c751158e246397f">TWBR_VALUE</a>&#160;&#160;&#160;(((<a class="el" href="_drink_creator6000___config___c_8h.html#a43bafb28b29491ec7f871319b5a3b2f8">F_CPU</a>/<a class="el" href="#a8b7500a141450a9df212017430c0df9e">I2C_FREQ</a>)-32UL)/2UL)</td></tr>
<tr class="memdesc:a878f90cbeadf645d3c751158e246397f"><td class="mdescLeft">&#160;</td><td class="mdescRight">TWI Bit Rate Register value calculated from F_CPU and I2C_FREQ.  <br /></td></tr>
<tr class="memitem:af57ab7f973e3ed896331baaafb995918" id="r_af57ab7f973e3ed896331baaafb995918"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af57ab7f973e3ed896331baaafb995918">USE_RING_BUFFER_FOR_BLOCKING_OPERATIONS</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:af57ab7f973e3ed896331baaafb995918"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables (1) or disables (0) the use of a ring buffer for blocking I2C operations.  <br /></td></tr>
<tr class="memitem:a24007cd8c0a6a3aae0965b4032a92c2d" id="r_a24007cd8c0a6a3aae0965b4032a92c2d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a24007cd8c0a6a3aae0965b4032a92c2d">TIMER4_POLLING_CYCLE</a>&#160;&#160;&#160;255</td></tr>
<tr class="memdesc:a24007cd8c0a6a3aae0965b4032a92c2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">OCR4A value for Timer 4 in "polling" mode.  <br /></td></tr>
<tr class="memitem:ab7f7ead164f2e3dc08ce8a60ff6819ab" id="r_ab7f7ead164f2e3dc08ce8a60ff6819ab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab7f7ead164f2e3dc08ce8a60ff6819ab">TIMER4_SENDING_CYCLE</a>&#160;&#160;&#160;14</td></tr>
<tr class="memdesc:ab7f7ead164f2e3dc08ce8a60ff6819ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">OCR4A value for Timer 4 in "sending" mode (fast ISR during active I2C transmission).  <br /></td></tr>
<tr class="memitem:a547981ee4a0a60f7fa4826eb59ded9b7" id="r_a547981ee4a0a60f7fa4826eb59ded9b7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a547981ee4a0a60f7fa4826eb59ded9b7">I2C_TX_BUFFER_SIZE</a>&#160;&#160;&#160;255</td></tr>
<tr class="memdesc:a547981ee4a0a60f7fa4826eb59ded9b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of the I2C transmit buffer, in bytes.  <br /></td></tr>
<tr class="memitem:af47492c802fe313ca8455294843378f6" id="r_af47492c802fe313ca8455294843378f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af47492c802fe313ca8455294843378f6">I2C_RX_BUFFER_SIZE</a>&#160;&#160;&#160;64</td></tr>
<tr class="memdesc:af47492c802fe313ca8455294843378f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of the I2C receive buffer, in bytes.  <br /></td></tr>
<tr id="define-members-0" class="groupHeader"><td colspan="2"><div class="groupHeader">I2C TWI Master Transmitter status codes</div></td></tr>
<tr class="memitem:a8ec630c2063d0353c53d140b99382d80" id="r_a8ec630c2063d0353c53d140b99382d80"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8ec630c2063d0353c53d140b99382d80">TW_START</a>&#160;&#160;&#160;0x08</td></tr>
<tr class="memitem:a8dce3e4b7e35355a8add9ed63d1fa3ab" id="r_a8dce3e4b7e35355a8add9ed63d1fa3ab"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8dce3e4b7e35355a8add9ed63d1fa3ab">TW_REP_START</a>&#160;&#160;&#160;0x10</td></tr>
<tr class="memitem:a85cae14b4190042335d25ed9a1b72369" id="r_a85cae14b4190042335d25ed9a1b72369"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a85cae14b4190042335d25ed9a1b72369">TW_MT_SLA_ACK</a>&#160;&#160;&#160;0x18</td></tr>
<tr class="memitem:aca64b973c51d6548a962c1d7cae0663e" id="r_aca64b973c51d6548a962c1d7cae0663e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aca64b973c51d6548a962c1d7cae0663e">TW_MT_SLA_NACK</a>&#160;&#160;&#160;0x20</td></tr>
<tr class="memitem:a4c28186053b5298305b131ad3e1111f7" id="r_a4c28186053b5298305b131ad3e1111f7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c28186053b5298305b131ad3e1111f7">TW_MT_DATA_ACK</a>&#160;&#160;&#160;0x28</td></tr>
<tr class="memitem:a91c107a74d268f8578d866ed1bbbd4f3" id="r_a91c107a74d268f8578d866ed1bbbd4f3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a91c107a74d268f8578d866ed1bbbd4f3">TW_MT_DATA_NACK</a>&#160;&#160;&#160;0x30</td></tr>
<tr id="define-members-1" class="groupHeader"><td colspan="2"><div class="groupHeader">I2C TWI Master Receiver status codes</div></td></tr>
<tr class="memitem:ac16504b87d15d83b97bb0ce61577bb40" id="r_ac16504b87d15d83b97bb0ce61577bb40"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac16504b87d15d83b97bb0ce61577bb40">TW_MR_SLA_ACK</a>&#160;&#160;&#160;0x40</td></tr>
<tr class="memitem:a655325b6f8a1818103b126cc3774d8e8" id="r_a655325b6f8a1818103b126cc3774d8e8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a655325b6f8a1818103b126cc3774d8e8">TW_MR_SLA_NACK</a>&#160;&#160;&#160;0x48</td></tr>
<tr class="memitem:a3c8c79b2ecb8d22358839890161cc33b" id="r_a3c8c79b2ecb8d22358839890161cc33b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3c8c79b2ecb8d22358839890161cc33b">TW_MR_DATA_ACK</a>&#160;&#160;&#160;0x50</td></tr>
<tr class="memitem:a532f0ffa12f684346c74a5cbec15950e" id="r_a532f0ffa12f684346c74a5cbec15950e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a532f0ffa12f684346c74a5cbec15950e">TW_MR_DATA_NACK</a>&#160;&#160;&#160;0x58</td></tr>
<tr id="define-members-2" class="groupHeader"><td colspan="2"><div class="groupHeader">Common I2C TWI definitions</div></td></tr>
<tr class="memitem:a8d3aca0acc182f459a51797321728168" id="r_a8d3aca0acc182f459a51797321728168"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8d3aca0acc182f459a51797321728168">TW_STATUS_MASK</a>&#160;&#160;&#160;0xF8</td></tr>
<tr class="memitem:a90d373160b1d0a3f0c454af83c57df71" id="r_a90d373160b1d0a3f0c454af83c57df71"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a90d373160b1d0a3f0c454af83c57df71">TW_BUS_ERROR</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="memitem:abcff70642634cb53e9d8e93872f70c90" id="r_abcff70642634cb53e9d8e93872f70c90"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abcff70642634cb53e9d8e93872f70c90">TW_NO_INFO</a>&#160;&#160;&#160;0xF8</td></tr>
<tr class="memitem:aa6cdedd1ab9925e4b4459b1f055e7ed7" id="r_aa6cdedd1ab9925e4b4459b1f055e7ed7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa6cdedd1ab9925e4b4459b1f055e7ed7">TW_STO</a>&#160;&#160;&#160;0xF8</td></tr>
<tr class="memitem:aa2fe33f497c74e0b5a72f36f121b2ef0" id="r_aa2fe33f497c74e0b5a72f36f121b2ef0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa2fe33f497c74e0b5a72f36f121b2ef0">WRITE_MODE</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="memitem:a064cc7153fdb5596b2079d865dd9e055" id="r_a064cc7153fdb5596b2079d865dd9e055"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a064cc7153fdb5596b2079d865dd9e055">READ_MODE</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="memitem:a19e4e88cd63be86367db44d69c18bd40" id="r_a19e4e88cd63be86367db44d69c18bd40"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a19e4e88cd63be86367db44d69c18bd40">I2C_READ_ACK</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="memitem:a77e78912d056ed106653c6ae19f983b3" id="r_a77e78912d056ed106653c6ae19f983b3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a77e78912d056ed106653c6ae19f983b3">I2C_READ_NACK</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="memitem:a013b5aa673f45bca79848684bb2b7f6e" id="r_a013b5aa673f45bca79848684bb2b7f6e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a013b5aa673f45bca79848684bb2b7f6e">READ_FLAG</a>&#160;&#160;&#160;1</td></tr>
<tr class="memitem:a06e9b431be0da4da79c54eb2b27de980" id="r_a06e9b431be0da4da79c54eb2b27de980"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a06e9b431be0da4da79c54eb2b27de980">WRITE_FLAG</a>&#160;&#160;&#160;0</td></tr>
<tr class="memitem:a177534082408c004b9e85877b9d026ad" id="r_a177534082408c004b9e85877b9d026ad"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a177534082408c004b9e85877b9d026ad">LAST_PACKAGE</a>&#160;&#160;&#160;1</td></tr>
<tr class="memitem:a5ee7f544aa492d779cd8e031534160cb" id="r_a5ee7f544aa492d779cd8e031534160cb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5ee7f544aa492d779cd8e031534160cb">NOT_LAST_PACKAGE</a>&#160;&#160;&#160;0</td></tr>
<tr class="memitem:aeecd740e1b25bfabae49e45628a75869" id="r_aeecd740e1b25bfabae49e45628a75869"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeecd740e1b25bfabae49e45628a75869">ADDRESS_PACKAGE</a>&#160;&#160;&#160;0</td></tr>
<tr class="memitem:ae9087d23a50a61f9d92ca1d6818e9139" id="r_ae9087d23a50a61f9d92ca1d6818e9139"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae9087d23a50a61f9d92ca1d6818e9139">DATA_PACKAGE</a>&#160;&#160;&#160;1</td></tr>
<tr id="define-members-3" class="groupHeader"><td colspan="2"><div class="groupHeader">I2C Finite State Machine (FSM) states</div></td></tr>
<tr class="memitem:ae3f6a60c396d9f1a51eb4ecc981951fa" id="r_ae3f6a60c396d9f1a51eb4ecc981951fa"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae3f6a60c396d9f1a51eb4ecc981951fa">I2C_STATE_IDLE</a>&#160;&#160;&#160;0</td></tr>
<tr class="memitem:abaadc33325af0f9fab5d70b9dcefbb00" id="r_abaadc33325af0f9fab5d70b9dcefbb00"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abaadc33325af0f9fab5d70b9dcefbb00">I2C_STATE_START_SENT</a>&#160;&#160;&#160;1</td></tr>
<tr class="memitem:ac1aaf47d7389feab0be4edb7ea2ab2ae" id="r_ac1aaf47d7389feab0be4edb7ea2ab2ae"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac1aaf47d7389feab0be4edb7ea2ab2ae">I2C_STATE_ADDRESS_SENT</a>&#160;&#160;&#160;2</td></tr>
<tr class="memitem:a4a31ca4c828c1e98d0395950c2042a8d" id="r_a4a31ca4c828c1e98d0395950c2042a8d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4a31ca4c828c1e98d0395950c2042a8d">I2C_STATE_DATA_SENT</a>&#160;&#160;&#160;3</td></tr>
<tr class="memitem:a8b9cbea0b5173f4fc60576dad01f3006" id="r_a8b9cbea0b5173f4fc60576dad01f3006"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8b9cbea0b5173f4fc60576dad01f3006">I2C_STATE_ERROR</a>&#160;&#160;&#160;4</td></tr>
<tr class="memitem:ad07634d5ed5abd7f4e2473117000c03b" id="r_ad07634d5ed5abd7f4e2473117000c03b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad07634d5ed5abd7f4e2473117000c03b">I2C_STATE_DATA_RECEIVED</a>&#160;&#160;&#160;5</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-typedef-members" class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a57b79314a222c848e2e86e83758e667e" id="r_a57b79314a222c848e2e86e83758e667e"><td class="memItemLeft" align="right" valign="top">typedef uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a57b79314a222c848e2e86e83758e667e">i2c_tx_buf_index_t</a></td></tr>
<tr class="memdesc:a57b79314a222c848e2e86e83758e667e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index type for I2C TX buffer positions.  <br /></td></tr>
<tr class="memitem:a0a230fe8afcd367304de7418b913d2df" id="r_a0a230fe8afcd367304de7418b913d2df"><td class="memItemLeft" align="right" valign="top">typedef uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0a230fe8afcd367304de7418b913d2df">i2c_rx_buf_index_t</a></td></tr>
<tr class="memdesc:a0a230fe8afcd367304de7418b913d2df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index type for I2C RX buffer positions.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5730d9445429351b9f750084c5cb5aae" id="r_a5730d9445429351b9f750084c5cb5aae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5730d9445429351b9f750084c5cb5aae">i2c_init</a> (void)</td></tr>
<tr class="memdesc:a5730d9445429351b9f750084c5cb5aae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize I²C (TWI) hardware and optional Timer4 support.  <br /></td></tr>
<tr class="memitem:a5a1923e2271df541e858cb4e05d7b895" id="r_a5a1923e2271df541e858cb4e05d7b895"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5a1923e2271df541e858cb4e05d7b895">i2c_enable</a> (void)</td></tr>
<tr class="memdesc:a5a1923e2271df541e858cb4e05d7b895"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable I²C hardware (and Timer4 if used).  <br /></td></tr>
<tr class="memitem:abe70f8fe4c72329b89ec526c749f50d7" id="r_abe70f8fe4c72329b89ec526c749f50d7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abe70f8fe4c72329b89ec526c749f50d7">i2c_disable</a> (void)</td></tr>
<tr class="memdesc:abe70f8fe4c72329b89ec526c749f50d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable I²C hardware (and Timer4 if used).  <br /></td></tr>
<tr class="memitem:a5d09f10466d174ce0b5c5bb3045eb52f" id="r_a5d09f10466d174ce0b5c5bb3045eb52f"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5d09f10466d174ce0b5c5bb3045eb52f">i2c_tx_buffer_is_empty</a> (void)</td></tr>
<tr class="memdesc:a5d09f10466d174ce0b5c5bb3045eb52f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the I2C TX buffer is empty.  <br /></td></tr>
<tr class="memitem:a34466b1132aef1e13135a1a7bcf65ac0" id="r_a34466b1132aef1e13135a1a7bcf65ac0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a34466b1132aef1e13135a1a7bcf65ac0">i2c_tx_buffer_clear_until_next_address</a> (void)</td></tr>
<tr class="memdesc:a34466b1132aef1e13135a1a7bcf65ac0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the TX buffer until the next address package is found.  <br /></td></tr>
<tr class="memitem:a91bb1859c12fbc7c029b2a5a2309b240" id="r_a91bb1859c12fbc7c029b2a5a2309b240"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a91bb1859c12fbc7c029b2a5a2309b240">i2c_write_byte_to_address_blocking</a> (uint8_t address, uint8_t data)</td></tr>
<tr class="memdesc:a91bb1859c12fbc7c029b2a5a2309b240"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a single data byte to the specified I2C slave address in blocking mode.  <br /></td></tr>
<tr class="memitem:ae74a6ec74823b5c3816959f3f696e945" id="r_ae74a6ec74823b5c3816959f3f696e945"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae74a6ec74823b5c3816959f3f696e945">i2c_write_bytes_to_address_blocking</a> (uint8_t address, uint8_t *data, uint8_t length)</td></tr>
<tr class="memdesc:ae74a6ec74823b5c3816959f3f696e945"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends multiple data bytes to the specified I2C slave address in blocking mode.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-var-members" class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:abe1f812dc6284ef881acc78023cd7a9d" id="r_abe1f812dc6284ef881acc78023cd7a9d"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="struct_i2_c___data__t.html">I2C_Data_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abe1f812dc6284ef881acc78023cd7a9d">i2c_buffer_tx</a> [<a class="el" href="#a547981ee4a0a60f7fa4826eb59ded9b7">I2C_TX_BUFFER_SIZE</a>]</td></tr>
<tr class="memdesc:abe1f812dc6284ef881acc78023cd7a9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transmit buffer holding I2C data packets to be sent.  <br /></td></tr>
<tr class="memitem:a5b113d44bda8ed39efc026d277878c09" id="r_a5b113d44bda8ed39efc026d277878c09"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="#a57b79314a222c848e2e86e83758e667e">i2c_tx_buf_index_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5b113d44bda8ed39efc026d277878c09">i2c_tx_buffer_head</a></td></tr>
<tr class="memdesc:a5b113d44bda8ed39efc026d277878c09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index of the head position in the TX buffer.  <br /></td></tr>
<tr class="memitem:aab3b5c0fa4c5e46e6d6009f357dc891e" id="r_aab3b5c0fa4c5e46e6d6009f357dc891e"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="#a57b79314a222c848e2e86e83758e667e">i2c_tx_buf_index_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aab3b5c0fa4c5e46e6d6009f357dc891e">i2c_tx_buffer_tail</a></td></tr>
<tr class="memdesc:aab3b5c0fa4c5e46e6d6009f357dc891e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index of the tail position in the TX buffer.  <br /></td></tr>
<tr class="memitem:aec1f537d4e465641ecde4ad6ec87b894" id="r_aec1f537d4e465641ecde4ad6ec87b894"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aec1f537d4e465641ecde4ad6ec87b894">i2c_status</a></td></tr>
<tr class="memdesc:aec1f537d4e465641ecde4ad6ec87b894"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current status of the I2C state machine.  <br /></td></tr>
<tr class="memitem:a41fd49c4a663a655243908d0f709bd1a" id="r_a41fd49c4a663a655243908d0f709bd1a"><td class="memItemLeft" align="right" valign="top">volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a41fd49c4a663a655243908d0f709bd1a">i2c_state</a></td></tr>
<tr class="memdesc:a41fd49c4a663a655243908d0f709bd1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current state of the I²C finite state machine (FSM).  <br /></td></tr>
<tr class="memitem:af0c4e2f4e0af62fc7bc45e616dd761d5" id="r_af0c4e2f4e0af62fc7bc45e616dd761d5"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="struct_i2_c___error_counters__t.html">I2C_ErrorCounters_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af0c4e2f4e0af62fc7bc45e616dd761d5">i2c_error_counters</a></td></tr>
<tr class="memdesc:af0c4e2f4e0af62fc7bc45e616dd761d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">I²C error counters.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>I2C (TWI) Master driver for AVR (ATmega2560). </p>
<p>This module implements blocking and non-blocking I2C communication in Master mode using a TX buffer that stores data packets (address, data, RW flag). Both blocking and non-blocking data reading are supported. The driver is RTOS-independent.</p>
<dl class="section note"><dt>Note</dt><dd>TX and RX buffer sizes can be configured via macros. </dd>
<dd>
The driver handles basic bus states and TWI status codes. </dd>
<dd>
Communication is performed through a buffer and ISR (in the source file).</dd>
<dd>
Timer4 is used exclusively for I2C management, configured to generate interrupts at approximately 10 microseconds interval (with prescaler 64 and 8 MHz CPU clock).</dd>
<dd>
The <span class="tt">TIMER4_POLLING_CYCLE</span> macro defines the number of Timer4 ticks between bus polling operations, while the <span class="tt">TIMER4_SENDING_CYCLE</span> macro specifies the number of ticks between consecutive data bytes sent on the bus.</dd></dl>
<p>Timer4 Compare A interrupt (<span class="tt">TIMER4_COMPA_vect</span>) and TWI interrupt (<span class="tt">TWI_vect</span>) handlers are implemented internally in <span class="tt"><a class="el" href="i2c_8c.html">i2c.c</a></span>. </p>
</div><a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="aeecd740e1b25bfabae49e45628a75869" name="aeecd740e1b25bfabae49e45628a75869"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeecd740e1b25bfabae49e45628a75869">&#9670;&#160;</a></span>ADDRESS_PACKAGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADDRESS_PACKAGE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flag indicating address package </p>

</div>
</div>
<a id="ae9087d23a50a61f9d92ca1d6818e9139" name="ae9087d23a50a61f9d92ca1d6818e9139"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9087d23a50a61f9d92ca1d6818e9139">&#9670;&#160;</a></span>DATA_PACKAGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DATA_PACKAGE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flag indicating data package </p>

</div>
</div>
<a id="a8b7500a141450a9df212017430c0df9e" name="a8b7500a141450a9df212017430c0df9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b7500a141450a9df212017430c0df9e">&#9670;&#160;</a></span>I2C_FREQ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_FREQ&#160;&#160;&#160;100000UL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>I2C bus frequency in Hertz. </p>
<p>Default is 100 kHz. </p>

</div>
</div>
<a id="a19e4e88cd63be86367db44d69c18bd40" name="a19e4e88cd63be86367db44d69c18bd40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19e4e88cd63be86367db44d69c18bd40">&#9670;&#160;</a></span>I2C_READ_ACK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_READ_ACK&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Acknowledge bit when reading next byte </p>

</div>
</div>
<a id="a77e78912d056ed106653c6ae19f983b3" name="a77e78912d056ed106653c6ae19f983b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77e78912d056ed106653c6ae19f983b3">&#9670;&#160;</a></span>I2C_READ_NACK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_READ_NACK&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>No acknowledge bit when reading last byte </p>

</div>
</div>
<a id="af47492c802fe313ca8455294843378f6" name="af47492c802fe313ca8455294843378f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af47492c802fe313ca8455294843378f6">&#9670;&#160;</a></span>I2C_RX_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_RX_BUFFER_SIZE&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Size of the I2C receive buffer, in bytes. </p>

</div>
</div>
<a id="ac1aaf47d7389feab0be4edb7ea2ab2ae" name="ac1aaf47d7389feab0be4edb7ea2ab2ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1aaf47d7389feab0be4edb7ea2ab2ae">&#9670;&#160;</a></span>I2C_STATE_ADDRESS_SENT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_STATE_ADDRESS_SENT&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Address sent, waiting for ACK/NACK </p>

</div>
</div>
<a id="ad07634d5ed5abd7f4e2473117000c03b" name="ad07634d5ed5abd7f4e2473117000c03b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad07634d5ed5abd7f4e2473117000c03b">&#9670;&#160;</a></span>I2C_STATE_DATA_RECEIVED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_STATE_DATA_RECEIVED&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Data byte received from slave, waiting for next action </p>

</div>
</div>
<a id="a4a31ca4c828c1e98d0395950c2042a8d" name="a4a31ca4c828c1e98d0395950c2042a8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a31ca4c828c1e98d0395950c2042a8d">&#9670;&#160;</a></span>I2C_STATE_DATA_SENT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_STATE_DATA_SENT&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Data byte sent, waiting for ACK/NACK </p>

</div>
</div>
<a id="a8b9cbea0b5173f4fc60576dad01f3006" name="a8b9cbea0b5173f4fc60576dad01f3006"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b9cbea0b5173f4fc60576dad01f3006">&#9670;&#160;</a></span>I2C_STATE_ERROR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_STATE_ERROR&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Error occurred during transmission </p>

</div>
</div>
<a id="ae3f6a60c396d9f1a51eb4ecc981951fa" name="ae3f6a60c396d9f1a51eb4ecc981951fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3f6a60c396d9f1a51eb4ecc981951fa">&#9670;&#160;</a></span>I2C_STATE_IDLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_STATE_IDLE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Idle state, no ongoing transmission </p>

</div>
</div>
<a id="abaadc33325af0f9fab5d70b9dcefbb00" name="abaadc33325af0f9fab5d70b9dcefbb00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaadc33325af0f9fab5d70b9dcefbb00">&#9670;&#160;</a></span>I2C_STATE_START_SENT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_STATE_START_SENT&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>START condition sent, waiting for acknowledgment </p>

</div>
</div>
<a id="a547981ee4a0a60f7fa4826eb59ded9b7" name="a547981ee4a0a60f7fa4826eb59ded9b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a547981ee4a0a60f7fa4826eb59ded9b7">&#9670;&#160;</a></span>I2C_TX_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define I2C_TX_BUFFER_SIZE&#160;&#160;&#160;255</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Size of the I2C transmit buffer, in bytes. </p>

</div>
</div>
<a id="a177534082408c004b9e85877b9d026ad" name="a177534082408c004b9e85877b9d026ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a177534082408c004b9e85877b9d026ad">&#9670;&#160;</a></span>LAST_PACKAGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LAST_PACKAGE&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flag indicating last package </p>

</div>
</div>
<a id="a5ee7f544aa492d779cd8e031534160cb" name="a5ee7f544aa492d779cd8e031534160cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ee7f544aa492d779cd8e031534160cb">&#9670;&#160;</a></span>NOT_LAST_PACKAGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NOT_LAST_PACKAGE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flag indicating not last package </p>

</div>
</div>
<a id="a013b5aa673f45bca79848684bb2b7f6e" name="a013b5aa673f45bca79848684bb2b7f6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a013b5aa673f45bca79848684bb2b7f6e">&#9670;&#160;</a></span>READ_FLAG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define READ_FLAG&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flag indicating read operation </p>

</div>
</div>
<a id="a064cc7153fdb5596b2079d865dd9e055" name="a064cc7153fdb5596b2079d865dd9e055"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a064cc7153fdb5596b2079d865dd9e055">&#9670;&#160;</a></span>READ_MODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define READ_MODE&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read mode flag for I2C address </p>

</div>
</div>
<a id="a24007cd8c0a6a3aae0965b4032a92c2d" name="a24007cd8c0a6a3aae0965b4032a92c2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24007cd8c0a6a3aae0965b4032a92c2d">&#9670;&#160;</a></span>TIMER4_POLLING_CYCLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER4_POLLING_CYCLE&#160;&#160;&#160;255</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>OCR4A value for Timer 4 in "polling" mode. </p>
<p>Timer 4 generates an interrupt at a defined period, used to check whether there are data in the I2C buffer to be sent. The OCR4A value sets the time between consecutive ISR calls.</p>
<p>Calculation of OCR4A:   </p><p class="formulaDsp">
\[OCR4A = \frac{T_{interrupt}}{T_{tick}} - 1
\]
</p>
<p> where:</p><ul>
<li>\(T_{interrupt}\) is the desired interrupt period (in seconds),</li>
<li>\(T_{tick}\) is the timer tick period (here 4 µs = 4e-6 s).</li>
</ul>
<p>For OCR4A = 255 with 4 µs tick:   </p><p class="formulaDsp">
\[T_{interrupt} = (OCR4A + 1) * T_{tick} = (255 + 1) * 4\mu s \approx 1.024\ ms
\]
</p>
 
</div>
</div>
<a id="ab7f7ead164f2e3dc08ce8a60ff6819ab" name="ab7f7ead164f2e3dc08ce8a60ff6819ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7f7ead164f2e3dc08ce8a60ff6819ab">&#9670;&#160;</a></span>TIMER4_SENDING_CYCLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER4_SENDING_CYCLE&#160;&#160;&#160;14</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>OCR4A value for Timer 4 in "sending" mode (fast ISR during active I2C transmission). </p>
<p>The timer interval is reduced to accelerate polling while sending data.</p>
<p>Calculation of OCR4A:   </p><p class="formulaDsp">
\[T_{interrupt} = (OCR4A + 1) * T_{tick}
\]
</p>
<p>For OCR4A = 4 with 4 µs tick:   </p><p class="formulaDsp">
\[T_{interrupt} = (14 + 1) * 4\mu s = 60\mu s
\]
</p>
 
</div>
</div>
<a id="a90d373160b1d0a3f0c454af83c57df71" name="a90d373160b1d0a3f0c454af83c57df71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90d373160b1d0a3f0c454af83c57df71">&#9670;&#160;</a></span>TW_BUS_ERROR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TW_BUS_ERROR&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Bus error due to illegal start or stop condition </p>

</div>
</div>
<a id="a3c8c79b2ecb8d22358839890161cc33b" name="a3c8c79b2ecb8d22358839890161cc33b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c8c79b2ecb8d22358839890161cc33b">&#9670;&#160;</a></span>TW_MR_DATA_ACK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TW_MR_DATA_ACK&#160;&#160;&#160;0x50</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Data received, ACK returned </p>

</div>
</div>
<a id="a532f0ffa12f684346c74a5cbec15950e" name="a532f0ffa12f684346c74a5cbec15950e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a532f0ffa12f684346c74a5cbec15950e">&#9670;&#160;</a></span>TW_MR_DATA_NACK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TW_MR_DATA_NACK&#160;&#160;&#160;0x58</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Data received, NACK returned </p>

</div>
</div>
<a id="ac16504b87d15d83b97bb0ce61577bb40" name="ac16504b87d15d83b97bb0ce61577bb40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac16504b87d15d83b97bb0ce61577bb40">&#9670;&#160;</a></span>TW_MR_SLA_ACK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TW_MR_SLA_ACK&#160;&#160;&#160;0x40</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>SLA+R transmitted, ACK received </p>

</div>
</div>
<a id="a655325b6f8a1818103b126cc3774d8e8" name="a655325b6f8a1818103b126cc3774d8e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a655325b6f8a1818103b126cc3774d8e8">&#9670;&#160;</a></span>TW_MR_SLA_NACK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TW_MR_SLA_NACK&#160;&#160;&#160;0x48</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>SLA+R transmitted, NACK received </p>

</div>
</div>
<a id="a4c28186053b5298305b131ad3e1111f7" name="a4c28186053b5298305b131ad3e1111f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c28186053b5298305b131ad3e1111f7">&#9670;&#160;</a></span>TW_MT_DATA_ACK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TW_MT_DATA_ACK&#160;&#160;&#160;0x28</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Data transmitted, ACK received </p>

</div>
</div>
<a id="a91c107a74d268f8578d866ed1bbbd4f3" name="a91c107a74d268f8578d866ed1bbbd4f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91c107a74d268f8578d866ed1bbbd4f3">&#9670;&#160;</a></span>TW_MT_DATA_NACK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TW_MT_DATA_NACK&#160;&#160;&#160;0x30</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Data transmitted, NACK received </p>

</div>
</div>
<a id="a85cae14b4190042335d25ed9a1b72369" name="a85cae14b4190042335d25ed9a1b72369"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85cae14b4190042335d25ed9a1b72369">&#9670;&#160;</a></span>TW_MT_SLA_ACK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TW_MT_SLA_ACK&#160;&#160;&#160;0x18</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>SLA+W transmitted, ACK received </p>

</div>
</div>
<a id="aca64b973c51d6548a962c1d7cae0663e" name="aca64b973c51d6548a962c1d7cae0663e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca64b973c51d6548a962c1d7cae0663e">&#9670;&#160;</a></span>TW_MT_SLA_NACK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TW_MT_SLA_NACK&#160;&#160;&#160;0x20</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>SLA+W transmitted, NACK received </p>

</div>
</div>
<a id="abcff70642634cb53e9d8e93872f70c90" name="abcff70642634cb53e9d8e93872f70c90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcff70642634cb53e9d8e93872f70c90">&#9670;&#160;</a></span>TW_NO_INFO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TW_NO_INFO&#160;&#160;&#160;0xF8</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>No relevant state information </p>

</div>
</div>
<a id="a8dce3e4b7e35355a8add9ed63d1fa3ab" name="a8dce3e4b7e35355a8add9ed63d1fa3ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8dce3e4b7e35355a8add9ed63d1fa3ab">&#9670;&#160;</a></span>TW_REP_START</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TW_REP_START&#160;&#160;&#160;0x10</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Repeated START condition transmitted </p>

</div>
</div>
<a id="a8ec630c2063d0353c53d140b99382d80" name="a8ec630c2063d0353c53d140b99382d80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ec630c2063d0353c53d140b99382d80">&#9670;&#160;</a></span>TW_START</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TW_START&#160;&#160;&#160;0x08</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>START condition transmitted </p>

</div>
</div>
<a id="a8d3aca0acc182f459a51797321728168" name="a8d3aca0acc182f459a51797321728168"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d3aca0acc182f459a51797321728168">&#9670;&#160;</a></span>TW_STATUS_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TW_STATUS_MASK&#160;&#160;&#160;0xF8</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mask for TWI status bits </p>

</div>
</div>
<a id="aa6cdedd1ab9925e4b4459b1f055e7ed7" name="aa6cdedd1ab9925e4b4459b1f055e7ed7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6cdedd1ab9925e4b4459b1f055e7ed7">&#9670;&#160;</a></span>TW_STO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TW_STO&#160;&#160;&#160;0xF8</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>STOP condition transmitted (used when TWI is ready) </p>

</div>
</div>
<a id="a878f90cbeadf645d3c751158e246397f" name="a878f90cbeadf645d3c751158e246397f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a878f90cbeadf645d3c751158e246397f">&#9670;&#160;</a></span>TWBR_VALUE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TWBR_VALUE&#160;&#160;&#160;(((<a class="el" href="_drink_creator6000___config___c_8h.html#a43bafb28b29491ec7f871319b5a3b2f8">F_CPU</a>/<a class="el" href="#a8b7500a141450a9df212017430c0df9e">I2C_FREQ</a>)-32UL)/2UL)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>TWI Bit Rate Register value calculated from F_CPU and I2C_FREQ. </p>
<p>Used to configure the I2C clock speed. </p>

</div>
</div>
<a id="af57ab7f973e3ed896331baaafb995918" name="af57ab7f973e3ed896331baaafb995918"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af57ab7f973e3ed896331baaafb995918">&#9670;&#160;</a></span>USE_RING_BUFFER_FOR_BLOCKING_OPERATIONS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define USE_RING_BUFFER_FOR_BLOCKING_OPERATIONS&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables (1) or disables (0) the use of a ring buffer for blocking I2C operations. </p>
<p>When enabled, blocking I2C operations use a ring buffer to queue data before transmission, allowing asynchronous processing via interrupts. When disabled, blocking operations bypass the buffer and send data directly. </p>

</div>
</div>
<a id="a06e9b431be0da4da79c54eb2b27de980" name="a06e9b431be0da4da79c54eb2b27de980"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06e9b431be0da4da79c54eb2b27de980">&#9670;&#160;</a></span>WRITE_FLAG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WRITE_FLAG&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flag indicating write operation </p>

</div>
</div>
<a id="aa2fe33f497c74e0b5a72f36f121b2ef0" name="aa2fe33f497c74e0b5a72f36f121b2ef0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2fe33f497c74e0b5a72f36f121b2ef0">&#9670;&#160;</a></span>WRITE_MODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WRITE_MODE&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Write mode flag for I2C address </p>

</div>
</div>
<a name="doc-typedef-members" id="doc-typedef-members"></a><h2 id="header-doc-typedef-members" class="groupheader">Typedef Documentation</h2>
<a id="a0a230fe8afcd367304de7418b913d2df" name="a0a230fe8afcd367304de7418b913d2df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a230fe8afcd367304de7418b913d2df">&#9670;&#160;</a></span>i2c_rx_buf_index_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint8_t <a class="el" href="#a0a230fe8afcd367304de7418b913d2df">i2c_rx_buf_index_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Index type for I2C RX buffer positions. </p>
<p>Uses uint8_t if RX buffer size is 255 bytes or less, otherwise uint16_t. </p>

</div>
</div>
<a id="a57b79314a222c848e2e86e83758e667e" name="a57b79314a222c848e2e86e83758e667e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57b79314a222c848e2e86e83758e667e">&#9670;&#160;</a></span>i2c_tx_buf_index_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint8_t <a class="el" href="#a57b79314a222c848e2e86e83758e667e">i2c_tx_buf_index_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Index type for I2C TX buffer positions. </p>
<p>Uses uint8_t if TX buffer size is 255 bytes or less, otherwise uint16_t. </p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="abe70f8fe4c72329b89ec526c749f50d7" name="abe70f8fe4c72329b89ec526c749f50d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe70f8fe4c72329b89ec526c749f50d7">&#9670;&#160;</a></span>i2c_disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_disable </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable I²C hardware (and Timer4 if used). </p>

</div>
</div>
<a id="a5a1923e2271df541e858cb4e05d7b895" name="a5a1923e2271df541e858cb4e05d7b895"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a1923e2271df541e858cb4e05d7b895">&#9670;&#160;</a></span>i2c_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_enable </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable I²C hardware (and Timer4 if used). </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8h_a5a1923e2271df541e858cb4e05d7b895_icgraph.png" border="0" usemap="#ai2c_8h_a5a1923e2271df541e858cb4e05d7b895_icgraph" loading="lazy" alt=""/></div>
<map name="ai2c_8h_a5a1923e2271df541e858cb4e05d7b895_icgraph" id="ai2c_8h_a5a1923e2271df541e858cb4e05d7b895_icgraph">
<area shape="rect" title="Enable I²C hardware (and Timer4 if used)." alt="" coords="271,5,354,32"/>
<area shape="rect" href="_drink_creator6000___init_8cpp.html#aaaca845b980f160a23d3b990338d4602" title="Initialize RTOS memory resources and guard zones." alt="" coords="99,5,223,32"/>
<area shape="poly" title=" " alt="" coords="255,21,224,21,224,16,255,16"/>
<area shape="rect" href="_drink_creator6000___init_8cpp.html#ac13b6984fbac2d70b163e388a2d06155" title=" " alt="" coords="5,5,51,32"/>
<area shape="poly" title=" " alt="" coords="83,21,51,21,51,16,83,16"/>
</map>
</div>

</div>
</div>
<a id="a5730d9445429351b9f750084c5cb5aae" name="a5730d9445429351b9f750084c5cb5aae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5730d9445429351b9f750084c5cb5aae">&#9670;&#160;</a></span>i2c_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_init </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize I²C (TWI) hardware and optional Timer4 support. </p>
<p>Configures SDA/SCL pins, sets TWI speed, and optionally sets up Timer4 for polling cycles after STOP condition (used in blocking ring buffer mode). </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8h_a5730d9445429351b9f750084c5cb5aae_icgraph.png" border="0" usemap="#ai2c_8h_a5730d9445429351b9f750084c5cb5aae_icgraph" loading="lazy" alt=""/></div>
<map name="ai2c_8h_a5730d9445429351b9f750084c5cb5aae_icgraph" id="ai2c_8h_a5730d9445429351b9f750084c5cb5aae_icgraph">
<area shape="rect" title="Initialize I²C (TWI) hardware and optional Timer4 support." alt="" coords="271,5,333,32"/>
<area shape="rect" href="_drink_creator6000___init_8cpp.html#aaaca845b980f160a23d3b990338d4602" title="Initialize RTOS memory resources and guard zones." alt="" coords="99,5,223,32"/>
<area shape="poly" title=" " alt="" coords="255,21,223,21,223,16,255,16"/>
<area shape="rect" href="_drink_creator6000___init_8cpp.html#ac13b6984fbac2d70b163e388a2d06155" title=" " alt="" coords="5,5,51,32"/>
<area shape="poly" title=" " alt="" coords="83,21,51,21,51,16,83,16"/>
</map>
</div>

</div>
</div>
<a id="a34466b1132aef1e13135a1a7bcf65ac0" name="a34466b1132aef1e13135a1a7bcf65ac0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34466b1132aef1e13135a1a7bcf65ac0">&#9670;&#160;</a></span>i2c_tx_buffer_clear_until_next_address()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_tx_buffer_clear_until_next_address </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clears the TX buffer until the next address package is found. </p>
<p>This function advances the TX buffer tail index, effectively removing data packets until it reaches the next address package or the buffer head. It is used to discard pending data if a slave failed to respond, allowing the next transmission to be properly enqueued. </p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8h_a34466b1132aef1e13135a1a7bcf65ac0_icgraph.png" border="0" usemap="#ai2c_8h_a34466b1132aef1e13135a1a7bcf65ac0_icgraph" loading="lazy" alt=""/></div>
<map name="ai2c_8h_a34466b1132aef1e13135a1a7bcf65ac0_icgraph" id="ai2c_8h_a34466b1132aef1e13135a1a7bcf65ac0_icgraph">
<area shape="rect" title="Clears the TX buffer until the next address package is found." alt="" coords="98,5,235,48"/>
<area shape="rect" href="i2c_8c.html#a474f42eedbdc093683fdb4b88be3c48f" title=" " alt="" coords="5,13,50,40"/>
<area shape="poly" title=" " alt="" coords="82,29,50,29,50,24,82,24"/>
</map>
</div>

</div>
</div>
<a id="a5d09f10466d174ce0b5c5bb3045eb52f" name="a5d09f10466d174ce0b5c5bb3045eb52f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d09f10466d174ce0b5c5bb3045eb52f">&#9670;&#160;</a></span>i2c_tx_buffer_is_empty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool i2c_tx_buffer_is_empty </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if the I2C TX buffer is empty. </p>
<dl class="section return"><dt>Returns</dt><dd>true if the TX buffer is empty, false otherwise. </dd></dl>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="i2c_8h_a5d09f10466d174ce0b5c5bb3045eb52f_icgraph.png" border="0" usemap="#ai2c_8h_a5d09f10466d174ce0b5c5bb3045eb52f_icgraph" loading="lazy" alt=""/></div>
<map name="ai2c_8h_a5d09f10466d174ce0b5c5bb3045eb52f_icgraph" id="ai2c_8h_a5d09f10466d174ce0b5c5bb3045eb52f_icgraph">
<area shape="rect" title="Checks if the I2C TX buffer is empty." alt="" coords="575,31,730,57"/>
<area shape="rect" href="i2c_8c.html#a8aa6a32130ab26be17555166513a23ba" title=" " alt="" coords="449,5,494,32"/>
<area shape="poly" title=" " alt="" coords="559,34,494,24,495,19,560,28"/>
<area shape="rect" href="_drink_creator6000_8cpp.html#af5863d80f02086cec6575d444cb3ba4d" title=" " alt="" coords="416,56,527,83"/>
<area shape="poly" title=" " alt="" coords="560,60,528,64,527,59,559,54"/>
<area shape="rect" href="task_update_screen_8cpp.html#a95b4196d7cc3c3c908c70ec40498fd76" title=" " alt="" coords="239,56,368,83"/>
<area shape="poly" title=" " alt="" coords="401,72,369,72,369,67,401,67"/>
<area shape="rect" href="_drink_creator6000_8cpp.html#a9eabc803df0648f317c9414e1f8f90d6" title=" " alt="" coords="110,31,184,57"/>
<area shape="poly" title=" " alt="" coords="223,59,184,53,185,47,224,54"/>
<area shape="rect" href="_drink_creator6000_8cpp.html#a8b474bc28804b1a6e1dba4f7951657a2" title=" " alt="" coords="103,81,191,108"/>
<area shape="poly" title=" " alt="" coords="224,85,192,90,191,85,223,80"/>
<area shape="rect" href="_drink_creator6000_8cpp.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,56,55,83"/>
<area shape="poly" title=" " alt="" coords="95,58,56,67,54,61,94,53"/>
<area shape="poly" title=" " alt="" coords="87,84,54,77,55,72,88,79"/>
</map>
</div>

</div>
</div>
<a id="a91bb1859c12fbc7c029b2a5a2309b240" name="a91bb1859c12fbc7c029b2a5a2309b240"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91bb1859c12fbc7c029b2a5a2309b240">&#9670;&#160;</a></span>i2c_write_byte_to_address_blocking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_write_byte_to_address_blocking </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>address</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a single data byte to the specified I2C slave address in blocking mode. </p>
<p>This function enqueues the address and data byte into the TX buffer and waits until there is enough space in the buffer before returning. Interrupts are temporarily disabled during buffer updates to ensure atomicity and data consistency.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>7-bit I2C slave address. </td></tr>
    <tr><td class="paramname">data</td><td>Single byte to be transmitted. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae74a6ec74823b5c3816959f3f696e945" name="ae74a6ec74823b5c3816959f3f696e945"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae74a6ec74823b5c3816959f3f696e945">&#9670;&#160;</a></span>i2c_write_bytes_to_address_blocking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_write_bytes_to_address_blocking </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>address</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>length</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends multiple data bytes to the specified I2C slave address in blocking mode. </p>
<p>This function enqueues the address and data bytes into the TX buffer and waits until there is enough space in the buffer before returning. Interrupts are temporarily disabled during buffer updates to ensure atomicity and data consistency.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>7-bit I2C slave address. </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to the data array to be transmitted. </td></tr>
    <tr><td class="paramname">length</td><td>Number of bytes to send. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a name="doc-var-members" id="doc-var-members"></a><h2 id="header-doc-var-members" class="groupheader">Variable Documentation</h2>
<a id="abe1f812dc6284ef881acc78023cd7a9d" name="abe1f812dc6284ef881acc78023cd7a9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe1f812dc6284ef881acc78023cd7a9d">&#9670;&#160;</a></span>i2c_buffer_tx</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="struct_i2_c___data__t.html">I2C_Data_t</a> i2c_buffer_tx[<a class="el" href="#a547981ee4a0a60f7fa4826eb59ded9b7">I2C_TX_BUFFER_SIZE</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Transmit buffer holding I2C data packets to be sent. </p>

</div>
</div>
<a id="af0c4e2f4e0af62fc7bc45e616dd761d5" name="af0c4e2f4e0af62fc7bc45e616dd761d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0c4e2f4e0af62fc7bc45e616dd761d5">&#9670;&#160;</a></span>i2c_error_counters</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="struct_i2_c___error_counters__t.html">I2C_ErrorCounters_t</a> i2c_error_counters</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>I²C error counters. </p>
<p>Holds cumulative counts of specific I²C/TWI error events detected by the driver during operation.</p>
<p>These counters can be used for diagnostics and long-term monitoring of bus reliability.</p>
<p>Typical fields inside <a class="el" href="struct_i2_c___error_counters__t.html" title="Counters for different I2C/TWI error types.">I2C_ErrorCounters_t</a> may include:</p><ul>
<li><b>arbitration_lost</b> — number of times bus arbitration was lost</li>
<li><b>nack_on_address</b> — number of NACKs received after sending SLA+W or SLA+R</li>
<li><b>nack_on_data</b> — number of NACKs received after sending a data byte</li>
<li><b>bus_error</b> — number of illegal START/STOP conditions detected</li>
</ul>
<p>The structure is updated inside the <span class="tt">TWI_vect</span> ISR whenever an error-related TWI status code is encountered. </p>

</div>
</div>
<a id="a41fd49c4a663a655243908d0f709bd1a" name="a41fd49c4a663a655243908d0f709bd1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41fd49c4a663a655243908d0f709bd1a">&#9670;&#160;</a></span>i2c_state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t i2c_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Current state of the I²C finite state machine (FSM). </p>
<p>Represents the current step of the I²C driver’s FSM during transmission. The FSM is updated in the <span class="tt">TWI_vect</span> interrupt handler in response to TWI status codes. </p>

</div>
</div>
<a id="aec1f537d4e465641ecde4ad6ec87b894" name="aec1f537d4e465641ecde4ad6ec87b894"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec1f537d4e465641ecde4ad6ec87b894">&#9670;&#160;</a></span>i2c_status</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile uint8_t i2c_status</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Current status of the I2C state machine. </p>
<p>Status of the current I²C operation.</p>
<p>Stores the last TWI/I²C status code (from the TWSR register), indicating the current bus condition, e.g.:</p><ul>
<li>START condition transmitted</li>
<li>SLA+W / SLA+R transmitted and ACK/NACK received</li>
<li>Data byte transmitted/received with ACK/NACK</li>
<li>Bus errors (arbitration lost, ACK failure, etc.) </li>
</ul>

</div>
</div>
<a id="a5b113d44bda8ed39efc026d277878c09" name="a5b113d44bda8ed39efc026d277878c09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b113d44bda8ed39efc026d277878c09">&#9670;&#160;</a></span>i2c_tx_buffer_head</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="#a57b79314a222c848e2e86e83758e667e">i2c_tx_buf_index_t</a> i2c_tx_buffer_head</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Index of the head position in the TX buffer. </p>

</div>
</div>
<a id="aab3b5c0fa4c5e46e6d6009f357dc891e" name="aab3b5c0fa4c5e46e6d6009f357dc891e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab3b5c0fa4c5e46e6d6009f357dc891e">&#9670;&#160;</a></span>i2c_tx_buffer_tail</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">volatile <a class="el" href="#a57b79314a222c848e2e86e83758e667e">i2c_tx_buf_index_t</a> i2c_tx_buffer_tail</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel extern">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Index of the tail position in the TX buffer. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_5290e710249d6b673b2b660f4556b41f.html">avr_peripherals</a></li><li class="navelem"><a href="dir_31f044720ecb31fd870420d8de3bcd69.html">i2c</a></li><li class="navelem"><a href="i2c_8h.html">i2c.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
